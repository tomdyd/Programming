<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Crud operations</title>
    <link rel="stylesheet" href="styles/styles.css">
</head>

<body>
    <h1 class="title">Cans</h1>
    <fieldset>
        <form class="canForm">
            <label id="index-label" for="_index">Index</label>
            <input type="text" name="_index" placeholder="Index" />

            <label id="fullname-label" for="_fullname">Name</label>
            <input type="text" name="_fullname" placeholder="Name" />

            <label id="supplier-label" for="_supplier">Supplier</label>
            <input type="text" name="_supplier" placeholder="Supplier">

            <label id="acceptance-date" for="_acceptance-date">Acceptance date:</label>
            <input type="date" name="_acceptance-date" placeholder="Acceptance date">

            <label id="_expiriation-date" for="_expiriationDate">Expiriation date: </label>
            <input type="date" name="_expiriationDate" placeholder="Expiriation date">

            <label id="amount" for="_amount">Amount</label>
            <input type="number" name="_amount" placeholder="Amount">

            <label id="storage-place" for="_storagePlace">Storage place</label>
            <input type="text" name="_storagePlace" placeholder="Storage place">

            <label id="height" for="_height">Height</label>
            <input type="number" name="_height" placeholder="Height">

            <label id="diameter" for="_diameter">Diameter</label>
            <input type="number" name="_diameter" placeholder="Diameter">

            <label id="type-of-internal-varnish" for="_typeOfInternalVarnish">Type of internal varnish</label>
            <select name="_type-of-internal-varnish">
                <option value="">Select an option</option>
                <option value="PPG">PPG</option>
                <option value="Valspar">Valspar</option>
                <option value="HOBA">HOBA</option>
            </select>

            <button type="submit" id="submit">Submit</button>
        </form>

        <a href="index.html"><button>Go back</button></a>
        <a href="index.html"><button>Find</button></a>
    </fieldset>

    <ul>
        
    </ul>

    <script>
        const formEl = document.querySelector('.canForm');

        formEl.addEventListener('submit', event => {
            event.preventDefault();

            const formData = new FormData(formEl);

            const data = Object.fromEntries(formData);
            console.log(data);

            fetch('https://localhost:7283/api/Cans',
                {
                    method: 'POST',
                    headers: {
                        'Accept': 'application/json',
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                }
            )
        });

        fetch('https://localhost:7283/api/Cans')
        .then(res => {
            return res.json();
        })
        .then(data => {
            data.forEach(Cans => {
                const markup = '<li>${Cans._fullName}</li>';

                document.querySelector('ul').insertAdjacentElement('beforeend', markup);
            });
        })
    </script>
</body>

</html>